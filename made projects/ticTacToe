<!DOCTYPE html>
<html>
<head>
  <style>
    table {border-collapse: collapse;}
    td {
      width: 60px; height: 60px;
      text-align: center;
      font-size: 2em;
      border: 2px solid #333;
      cursor: pointer;
    }
    #msg { margin-top: 10px; font-size: 1.2em; }
  </style>
</head>
<body>
  <table>
    <tbody>
      <tr>
        <td id="c00"></td><td id="c01"></td><td id="c02"></td>
      </tr>
      <tr>
        <td id="c10"></td><td id="c11"></td><td id="c12"></td>
      </tr>
      <tr>
        <td id="c20"></td><td id="c21"></td><td id="c22"></td>
      </tr>
    </tbody>
  </table>
  <div id="msg"></div>
<script>
let board = [["","",""],["","",""],["","",""]];
let msg = document.getElementById("msg");
let gameOver = false;

function checkWin(b, mark) {
  for(let i=0;i<3;i++){
    if(b[i][0]===mark&&b[i][1]===mark&&b[i][2]===mark) return true;
    if(b[0][i]===mark&&b[1][i]===mark&&b[2][i]===mark) return true;
  }
  if(b[0][0]===mark&&b[1][1]===mark&&b[2][2]===mark) return true;
  if(b[0][2]===mark&&b[1][1]===mark&&b[2][0]===mark) return true;
  return false;
}
function isFull(b){
  return b.flat().every(x=>x!=="");
}
function minimax(b, depth, isMax) {
  if(checkWin(b, "O")) return {score: 10-depth};
  if(checkWin(b, "X")) return {score: depth-10};
  if(isFull(b)) return {score: 0};
  let moves = [];
  for(let r=0;r<3;r++){
    for(let c=0;c<3;c++){
      if(b[r][c]===""){
        b[r][c] = isMax ? "O" : "X";
        let result = minimax(b, depth+1, !isMax);
        moves.push({score: result.score, row: r, col: c});
        b[r][c]="";
      }
    }
  }
  // Choose best move
  if(isMax){
    let max = -Infinity, move;
    for(let m of moves){
      if(m.score>max){
        max = m.score; move=m;
      }
    }
    return move;
  }else{
    let min = Infinity, move;
    for(let m of moves){
      if(m.score<min){
        min = m.score; move=m;
      }
    }
    return move;
  }
}
function botMove() {
  if(gameOver) return;
  let best = minimax(board, 0, true);
  if(best && board[best.row][best.col]===""){
    board[best.row][best.col]="O";
    document.getElementById(`c${best.row}${best.col}`).textContent="O";
    if(checkWin(board,"O")){
      msg.textContent="Bot (O) wins!";
      gameOver=true;
    } else if(isFull(board)){
      msg.textContent="It's a draw!";
      gameOver=true;
    } else {
      msg.textContent="Your turn (X)";
    }
  }
}
function cellClick(r,c){
  if(board[r][c]!==""||gameOver) return;
  board[r][c]="X";
  document.getElementById('c'+r+c).textContent="X";
  if(checkWin(board,"X")){
    msg.textContent="You (X) win!";
    gameOver=true;
    return;
  }
  if(isFull(board)){
    msg.textContent="It's a draw!";
    gameOver=true;
    return;
  }
  msg.textContent="Bot is thinking...";
  setTimeout(botMove, 400);
}
// Attach handlers
for(let r=0;r<3;r++)
  for(let c=0;c<3;c++)
    document.getElementById('c'+r+c).onclick = ()=>cellClick(r,c);
msg.textContent="Your turn (X)";
</script>
</body>
</html>
